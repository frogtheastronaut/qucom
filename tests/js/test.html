<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
  </head>
  <body style="font-family: system-ui; margin: 2rem;">
    <pre id="output">Loading...</pre>

    <script type="module">
      import * as qucom from 'https://cdn.jsdelivr.net/npm/qucom-sdk@latest/js/index.js'; // adjust path
      await qucom.wasm.default()

      const log = (msg) => {
        document.getElementById("output").textContent += msg + "\n";
      };

      // List all top-level exports from your wrapper
      log("Top-level exports:");
      log(Object.keys(qucom).join("\n"));
      log("\n");

      async function runDeutschJozsa() {
        try {
          log("Initializing Deutschâ€“Jozsa circuit...");

          // Use the pre-built circuit from your wrapper
          const circuit = qucom.circuits.deutschJozsa(2, true); // true = balanced

          const result = circuit.execute();

          log("Execution complete!");
          log("Measurement results:");
          log(JSON.stringify(result, null, 2));
          log("\nQASM output:");
          log(circuit.toQASM());
        } catch (err) {
          log("Error: " + err);
          console.error(err);
        }
      }

      runDeutschJozsa();
    </script>
  </body>
</html>
